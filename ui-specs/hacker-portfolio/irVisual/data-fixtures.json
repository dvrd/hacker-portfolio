{
  "drizzle_schema": {
    "tables": {
      "cv_downloads": {
        "columns": {
          "id": "serial primary key",
          "ip_address": "varchar(45)",
          "user_agent": "text",
          "referer": "text",
          "downloaded_at": "timestamp not null default now()",
          "country": "varchar(2)",
          "city": "varchar(100)"
        },
        "indexes": [
          "idx_cv_downloads_downloaded_at",
          "idx_cv_downloads_country"
        ]
      },
      "page_views": {
        "columns": {
          "id": "serial primary key",
          "page_path": "varchar(255) not null",
          "ip_address": "varchar(45)",
          "user_agent": "text",
          "referer": "text",
          "viewed_at": "timestamp not null default now()",
          "session_id": "uuid",
          "duration_seconds": "integer"
        },
        "indexes": [
          "idx_page_views_viewed_at",
          "idx_page_views_page_path",
          "idx_page_views_session_id"
        ]
      }
    },
    "relations": {},
    "enums": {}
  },

  "fixtures": {
    "profile": {
      "name": "DAN CASTRILLO",
      "title": "Software Engineer",
      "tagline": "10 YEARS BUILDING SYSTEMS",
      "bio": "Experienced Software Engineer with 10 years building production systems across the full stack. Polyglot engineer comfortable working in JavaScript/TypeScript ecosystems (Node, Bun, React, Vue), Python, and systems languages like C and Odin. Track record of improving performance, mentoring engineers, and shipping features that move business metrics. Equally comfortable optimizing backend data flows, debugging complex frontend state issues, or implementing computer vision pipelines.",
      "contact": {
        "email": "dan@devoured.io",
        "phone": "+584122650770",
        "location": "Caracas, Venezuela",
        "github": "github.com/dvrd"
      },
      "cv_url": "/dan_castrillo_cv.pdf"
    },

    "skills": [
      {
        "category": "Languages",
        "items": [
          { "name": "JavaScript/TypeScript", "level": 95, "icon": "‚ö°" },
          { "name": "Python", "level": 85, "icon": "üêç" },
          { "name": "Go", "level": 80, "icon": "üîµ" },
          { "name": "Rust", "level": 65, "icon": "ü¶Ä" },
          { "name": "C", "level": 70, "icon": "‚öôÔ∏è" },
          { "name": "Odin", "level": 60, "icon": "üî®" },
          { "name": "Ruby", "level": 70, "icon": "üíé" }
        ]
      },
      {
        "category": "Frontend",
        "items": [
          { "name": "React", "level": 95, "icon": "‚öõÔ∏è" },
          { "name": "Vue.js", "level": 85, "icon": "üíö" },
          { "name": "Next.js", "level": 95, "icon": "‚ñ≤" },
          { "name": "Nuxt 3", "level": 85, "icon": "üíö" },
          { "name": "Redux", "level": 85, "icon": "üîÑ" },
          { "name": "Shadcn UI", "level": 90, "icon": "üé®" },
          { "name": "Tailwind CSS", "level": 95, "icon": "üé®" }
        ]
      },
      {
        "category": "Backend",
        "items": [
          { "name": "Node.js", "level": 95, "icon": "üü¢" },
          { "name": "Express", "level": 90, "icon": "üöÇ" },
          { "name": "GraphQL", "level": 85, "icon": "‚óºÔ∏è" },
          { "name": "Django", "level": 75, "icon": "üé∏" },
          { "name": "Ruby on Rails", "level": 70, "icon": "üõ§Ô∏è" }
        ]
      },
      {
        "category": "Specialized",
        "items": [
          { "name": "OpenCV", "level": 80, "icon": "üëÅÔ∏è" },
          { "name": "Cypress", "level": 85, "icon": "üå≤" },
          { "name": "SQL", "level": 90, "icon": "üóÑÔ∏è" },
          { "name": "Bash", "level": 85, "icon": "üíª" },
          { "name": "Lua", "level": 70, "icon": "üåô" }
        ]
      }
    ],

    "work_history": [
      {
        "id": 1,
        "company": "Upwork",
        "position": "Senior Software Engineer",
        "location": "Caracas/Venezuela",
        "period": "October 2023 - Current",
        "current": true,
        "highlights": [
          "Architected Featured Jobs ads unit from concept to production",
          "Doubled conversion rates from 2.4% to 4%",
          "Drove test coverage from 40% to 90% with Cypress E2E",
          "Migrated PHP monolith to GraphQL (20% faster responses)",
          "Implemented security hardening (80% reduction in unauthorized access)",
          "Mentored 2 junior engineers",
          "Integrated AI-assisted development workflows"
        ],
        "tech": ["Vue.js", "GraphQL", "Cypress", "PHP", "Snowflake"]
      },
      {
        "id": 2,
        "company": "Tecnologia Urbana",
        "position": "Lead Software Engineer",
        "location": "Caracas/Venezuela",
        "period": "January 2023 - December 2023",
        "current": false,
        "highlights": [
          "Built traffic monitoring app with CV pipeline",
          "OpenCV object detection at 30fps 1080p",
          "Go backend with goroutines (3x throughput vs Python)",
          "Led team of 3 engineers",
          "Reduced production bugs by 30%"
        ],
        "tech": ["Go", "OpenCV", "Python", "Computer Vision"]
      },
      {
        "id": 3,
        "company": "Lantum",
        "position": "Senior Software Engineer",
        "location": "London/United Kingdom",
        "period": "June 2021 - January 2023",
        "current": false,
        "highlights": [
          "Rebuilt billing system (50% ticket reduction)",
          "Shipped calendar features (React + React Native)",
          "Fixed critical timezone bugs",
          "20% reduction in production incidents"
        ],
        "tech": ["React", "React Native", "Redux", "GraphQL"]
      },
      {
        "id": 4,
        "company": "Gamesys (Bally's)",
        "position": "Software Engineer",
        "location": "London/United Kingdom",
        "period": "March 2020 - June 2021",
        "current": false,
        "highlights": [
          "High-traffic gaming platform (millions of concurrent users)",
          "A/B testing framework for features",
          "Compliance for responsible gaming"
        ],
        "tech": ["React", "Node.js", "A/B Testing"]
      },
      {
        "id": 5,
        "company": "Jobsity",
        "position": "Full Stack Software Developer",
        "location": "Remote",
        "period": "August 2019 - March 2020",
        "current": false,
        "highlights": [
          "Delivered features across multiple client projects",
          "Ruby on Rails + React applications",
          "REST APIs and database schemas"
        ],
        "tech": ["Ruby on Rails", "React", "PostgreSQL"]
      },
      {
        "id": 6,
        "company": "Admios",
        "position": "Junior Full Stack Software Developer",
        "location": "Remote",
        "period": "November 2016 - August 2019",
        "current": false,
        "highlights": [
          "Full-stack features with Node and React",
          "Authentication flows and payment integrations",
          "Admin dashboards"
        ],
        "tech": ["Node.js", "React", "Express"]
      }
    ],

    "education": {
      "degree": "Fullstack Development",
      "institution": "Academia Hack",
      "period": "2014 - 2015"
    },

    "analytics": {
      "cv_download_sample": {
        "id": 1,
        "ip_address": "203.0.113.0",
        "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",
        "referer": "https://google.com",
        "downloaded_at": "2026-01-28T10:30:00Z",
        "country": "US",
        "city": "San Francisco"
      },
      "page_view_sample": {
        "id": 1,
        "page_path": "/",
        "ip_address": "203.0.113.0",
        "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",
        "referer": "https://google.com",
        "viewed_at": "2026-01-28T10:25:00Z",
        "session_id": "550e8400-e29b-41d4-a716-446655440000",
        "duration_seconds": 120
      }
    }
  },

  "api_contracts": {
    "GET /api/cv/download": {
      "description": "Download CV PDF and track analytics",
      "response": {
        "type": "file",
        "contentType": "application/pdf",
        "filename": "dan_castrillo_cv.pdf"
      },
      "side_effects": [
        "Creates cv_downloads record",
        "Returns PDF file stream"
      ]
    },
    "POST /api/analytics/pageview": {
      "description": "Track page view for analytics",
      "body": {
        "page_path": "string (required)",
        "session_id": "uuid (optional)",
        "referer": "string (optional)"
      },
      "response": {
        "success": "boolean",
        "view_id": "number"
      }
    },
    "GET /api/analytics/stats": {
      "description": "Get download and view statistics",
      "query": {
        "period": "string (optional: 'day' | 'week' | 'month' | 'all')"
      },
      "response": {
        "cv_downloads": {
          "total": "number",
          "by_country": "object"
        },
        "page_views": {
          "total": "number",
          "by_page": "object"
        }
      }
    }
  },

  "server_actions": {
    "trackCVDownload": {
      "input": "{ ip?: string, userAgent?: string, referer?: string }",
      "output": "Promise<void>",
      "description": "Track CV download in database"
    },
    "trackPageView": {
      "input": "{ pagePath: string, sessionId?: string, referer?: string }",
      "output": "Promise<void>",
      "description": "Track page view in database"
    }
  },

  "propertyPaths": {
    "skill-card": {
      "name": "skill.name",
      "level": "skill.level",
      "icon": "skill.icon",
      "progress": "(skill.level / 100) * 100 + '%'"
    },
    "work-card": {
      "company": "job.company",
      "position": "job.position",
      "period": "job.period",
      "current": "job.current",
      "highlights": "job.highlights[]",
      "tech": "job.tech[]"
    },
    "contact-info": {
      "email": "profile.contact.email",
      "phone": "profile.contact.phone",
      "location": "profile.contact.location",
      "github": "profile.contact.github"
    }
  },

  "conditionalRendering": {
    "matrix_rain": {
      "condition": "!prefersReducedMotion",
      "reason": "Disable animations for accessibility"
    },
    "glitch_effect": {
      "condition": "!prefersReducedMotion",
      "reason": "Disable visual effects for accessibility"
    },
    "current_job_badge": {
      "condition": "job.current === true",
      "reason": "Show 'Current' badge only for active positions"
    },
    "mobile_menu": {
      "condition": "screenWidth < 768",
      "reason": "Show Sheet menu on mobile, inline nav on desktop"
    },
    "parallax_effects": {
      "condition": "screenWidth >= 1024 && !prefersReducedMotion",
      "reason": "Enable parallax only on desktop without motion preference"
    }
  }
}
